# ë ˆì´ì–´ë³„ ëª…ëª… ê·œì¹™ ê°€ì´ë“œ

NestJS í”„ë¡œì íŠ¸ì—ì„œ ê°€ì¥ í†µìƒì ì´ê³  ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë ˆì´ì–´ë³„ í•¨ìˆ˜ ëª…ëª… ê·œì¹™ì…ë‹ˆë‹¤.

## ğŸ“‹ ëª©ì°¨
1. [Controller ë ˆì´ì–´](#controller-ë ˆì´ì–´)
2. [Service ë ˆì´ì–´](#service-ë ˆì´ì–´)
3. [Repository ë ˆì´ì–´](#repository-ë ˆì´ì–´)
4. [ì‹¤ì „ ì˜ˆì‹œ](#ì‹¤ì „-ì˜ˆì‹œ)

---

## Controller ë ˆì´ì–´

**ì—­í• **: HTTP ìš”ì²­/ì‘ë‹µ ì²˜ë¦¬, ë¼ìš°íŒ…, ë°ì´í„° ê²€ì¦  
**ê´€ì **: HTTP ë©”ì„œë“œì™€ ì—”ë“œí¬ì¸íŠ¸ ê´€ì   
**ëª…ëª… ì›ì¹™**: HTTP ë©”ì„œë“œì™€ ì¼ê´€ì„± ìˆëŠ” ë™ì‚¬ ì‚¬ìš©

### ê¸°ë³¸ ê·œì¹™

| HTTP ë©”ì„œë“œ | í•¨ìˆ˜ëª… íŒ¨í„´ | ì„¤ëª… | ì˜ˆì‹œ |
|-------------|------------|------|------|
| `@Get()` | `get___` | ë‹¨ì¼ ë˜ëŠ” ëª©ë¡ ì¡°íšŒ | `getUser`, `getUsers`, `getMessages` |
| `@Post()` | `create___` | ìƒˆ ë¦¬ì†ŒìŠ¤ ìƒì„± | `createUser`, `createMessage` |
| `@Put()` | `update___` | ì „ì²´ ìˆ˜ì • | `updateUser`, `updateProfile` |
| `@Patch()` | `update___` ë˜ëŠ” ë™ì‘ëª… | ë¶€ë¶„ ìˆ˜ì • ë˜ëŠ” íŠ¹ì • ë™ì‘ | `updateStatus`, `markAsRead` |
| `@Delete()` | `delete___` ë˜ëŠ” `remove___` | ì‚­ì œ | `deleteUser`, `removeMessage` |

### ìƒì„¸ íŒ¨í„´

```typescript
// âœ… ë‹¨ì¼ ì¡°íšŒ
@Get(':id')
async getUser(@Param('id') id: string) {}

// âœ… ëª©ë¡ ì¡°íšŒ
@Get()
async getUsers(@Query() query: PaginationDto) {}

// âœ… íŠ¹ì • ì¡°ê±´ ì¡°íšŒ
@Get('active')
async getActiveUsers() {}

// âœ… ìƒì„±
@Post()
async createUser(@Body() dto: CreateUserDto) {}

// âœ… ì „ì²´ ìˆ˜ì •
@Put(':id')
async updateUser(@Param('id') id: string, @Body() dto: UpdateUserDto) {}

// âœ… ë¶€ë¶„ ìˆ˜ì • (ì¼ë°˜ì )
@Patch(':id')
async updateUserProfile(@Param('id') id: string, @Body() dto: UpdateProfileDto) {}

// âœ… ë¶€ë¶„ ìˆ˜ì • (íŠ¹ì • ë™ì‘)
@Patch(':id/status')
async activateUser(@Param('id') id: string) {}

@Patch('messages/:id/read')
async markMessageAsRead(@Param('id') id: string) {}

// âœ… ì‚­ì œ
@Delete(':id')
async deleteUser(@Param('id') id: string) {}
```

### íŠ¹ìˆ˜í•œ ê²½ìš°

```typescript
// ë¹„ì¦ˆë‹ˆìŠ¤ ë™ì‘ (POST)
@Post('auth/login')
async login(@Body() dto: LoginDto) {}

@Post('password/reset')
async resetPassword(@Body() dto: ResetPasswordDto) {}

@Post('orders/:id/cancel')
async cancelOrder(@Param('id') id: string) {}

// ê²€ìƒ‰/í•„í„°ë§
@Get('search')
async searchUsers(@Query() query: SearchDto) {}

@Get('filter')
async filterMessages(@Query() filter: FilterDto) {}

// ì§‘ê³„/í†µê³„
@Get('count')
async countUsers() {}

@Get('statistics')
async getUserStatistics() {}
```

---

## Service ë ˆì´ì–´

**ì—­í• **: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬, íŠ¸ëœì­ì…˜ ê´€ë¦¬, ì—¬ëŸ¬ Repository ì¡°ìœ¨  
**ê´€ì **: ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ ê´€ì   
**ëª…ëª… ì›ì¹™**: ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ë„ì™€ ë„ë©”ì¸ ìš©ì–´ ì¤‘ì‹¬

### ê¸°ë³¸ ê·œì¹™

| ì‘ì—… ìœ í˜• | í•¨ìˆ˜ëª… íŒ¨í„´ | ì„¤ëª… | ì˜ˆì‹œ |
|-----------|------------|------|------|
| ì¡°íšŒ | `get___`, `find___`, `fetch___` | ë°ì´í„° ì¡°íšŒ | `getUserById`, `findActiveUsers` |
| ìƒì„± | `create___`, `register___`, `add___` | ìƒˆ ë°ì´í„° ìƒì„± | `createUser`, `registerMember` |
| ìˆ˜ì • | `update___`, `modify___`, `change___` | ë°ì´í„° ìˆ˜ì • | `updateUserProfile`, `changePassword` |
| ì‚­ì œ | `delete___`, `remove___`, `deactivate___` | ë°ì´í„° ì‚­ì œ/ë¹„í™œì„±í™” | `deleteUser`, `deactivateAccount` |
| ê²€ì¦ | `validate___`, `check___`, `verify___` | ìœ íš¨ì„± ê²€ì‚¬ | `validateUser`, `checkPermission` |
| ì²˜ë¦¬ | `process___`, `handle___`, `execute___` | ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ | `processPayment`, `handleOrder` |

### ìƒì„¸ íŒ¨í„´

#### 1. ì¡°íšŒ (Read)

```typescript
// âœ… ë‹¨ì¼ ì¡°íšŒ
async getUserById(id: string): Promise<User> {}
async findUserByEmail(email: string): Promise<User> {}

// âœ… ëª©ë¡ ì¡°íšŒ
async getUsers(pagination: PaginationDto): Promise<PaginatedResult<User>> {}
async getAllActiveUsers(): Promise<User[]> {}

// âœ… ì¡°ê±´ë¶€ ì¡°íšŒ
async findUsersByRole(role: UserRole): Promise<User[]> {}
async getUsersWithPendingOrders(): Promise<User[]> {}

// âœ… ì¡´ì¬ í™•ì¸
async existsUserByEmail(email: string): Promise<boolean> {}
async isUserActive(userId: string): Promise<boolean> {}

// âœ… ì¹´ìš´íŠ¸
async countUsers(): Promise<number> {}
async countActiveUsers(): Promise<number> {}
```

#### 2. ìƒì„± (Create)

```typescript
// âœ… ê¸°ë³¸ ìƒì„±
async createUser(dto: CreateUserDto): Promise<User> {}
async registerUser(dto: RegisterDto): Promise<User> {}

// âœ… ë³µì¡í•œ ìƒì„± (ì—¬ëŸ¬ ë‹¨ê³„)
async createUserWithProfile(userData: CreateUserDto, profileData: CreateProfileDto): Promise<User> {}
async registerMemberWithVerification(dto: RegisterDto): Promise<User> {}

// âœ… ì—°ê´€ ë°ì´í„° ìƒì„±
async addUserToGroup(userId: string, groupId: string): Promise<void> {}
async createOrderWithItems(order: CreateOrderDto, items: OrderItemDto[]): Promise<Order> {}
```

#### 3. ìˆ˜ì • (Update)

```typescript
// âœ… ì „ì²´ ìˆ˜ì •
async updateUser(id: string, dto: UpdateUserDto): Promise<User> {}
async modifyUserProfile(id: string, dto: UpdateProfileDto): Promise<User> {}

// âœ… ë¶€ë¶„ ìˆ˜ì • (íŠ¹ì • í•„ë“œ)
async updateUserEmail(id: string, email: string): Promise<void> {}
async changePassword(userId: string, newPassword: string): Promise<void> {}
async updateUserStatus(id: string, status: UserStatus): Promise<void> {}

// âœ… ìƒíƒœ ë³€ê²½
async activateUser(id: string): Promise<void> {}
async deactivateUser(id: string): Promise<void> {}
async markMessageAsRead(messageId: string): Promise<void> {}
async approveOrder(orderId: string): Promise<Order> {}
```

#### 4. ì‚­ì œ (Delete)

```typescript
// âœ… ë¬¼ë¦¬ì  ì‚­ì œ
async deleteUser(id: string): Promise<void> {}
async removeMessage(messageId: string): Promise<void> {}

// âœ… ë…¼ë¦¬ì  ì‚­ì œ (Soft Delete)
async deactivateUser(id: string): Promise<void> {}
async softDeleteUser(id: string): Promise<void> {}
async archiveOrder(orderId: string): Promise<void> {}
```

#### 5. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬

```typescript
// âœ… ì¸ì¦/ì¸ê°€
async authenticateUser(email: string, password: string): Promise<AuthResult> {}
async validateUserPermission(userId: string, resource: string): Promise<boolean> {}
async verifyEmailToken(token: string): Promise<boolean> {}

// âœ… ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ í”Œë¡œìš°
async processPayment(orderId: string, paymentInfo: PaymentDto): Promise<Payment> {}
async handleOrderCancellation(orderId: string, reason: string): Promise<void> {}
async sendMessageWithNotification(senderId: string, receiverId: string, content: string): Promise<Message> {}

// âœ… ë°°ì¹˜ ì‘ì—…
async processUserBatch(userIds: string[]): Promise<BatchResult> {}
async sendBulkNotifications(userIds: string[], notification: NotificationDto): Promise<void> {}
```

---

## Repository ë ˆì´ì–´

**ì—­í• **: ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼, ìˆœìˆ˜ CRUD ì—°ì‚°  
**ê´€ì **: ë°ì´í„° ì €ì¥ì†Œ ê´€ì   
**ëª…ëª… ì›ì¹™**: CRUD ì¤‘ì‹¬ì˜ ë°ì´í„°ë² ì´ìŠ¤ ì—°ì‚° ìš©ì–´

### ê¸°ë³¸ ê·œì¹™

| ì‘ì—… ìœ í˜• | í•¨ìˆ˜ëª… íŒ¨í„´ | ì„¤ëª… | ì˜ˆì‹œ |
|-----------|------------|------|------|
| ì¡°íšŒ (ë‹¨ì¼) | `findById`, `findOneBy___` | ë‹¨ì¼ ë ˆì½”ë“œ ì¡°íšŒ | `findById`, `findOneByEmail` |
| ì¡°íšŒ (ëª©ë¡) | `findAll`, `findBy___` | ì—¬ëŸ¬ ë ˆì½”ë“œ ì¡°íšŒ | `findAll`, `findByStatus` |
| ìƒì„± | `create`, `insert`, `save` | ìƒˆ ë ˆì½”ë“œ ìƒì„± | `create`, `insertMany` |
| ìˆ˜ì • | `update`, `updateBy___` | ë ˆì½”ë“œ ìˆ˜ì • | `update`, `updateById` |
| ì‚­ì œ | `delete`, `remove`, `deleteBy___` | ë ˆì½”ë“œ ì‚­ì œ | `delete`, `deleteById` |
| ì¡´ì¬ í™•ì¸ | `exists`, `existsBy___` | ë ˆì½”ë“œ ì¡´ì¬ ì—¬ë¶€ | `exists`, `existsByEmail` |
| ì¹´ìš´íŠ¸ | `count`, `countBy___` | ë ˆì½”ë“œ ê°œìˆ˜ | `count`, `countByStatus` |

### ìƒì„¸ íŒ¨í„´

#### 1. ì¡°íšŒ (Find)

```typescript
// âœ… ë‹¨ì¼ ì¡°íšŒ
async findById(id: string): Promise<User | null> {}
async findOneByEmail(email: string): Promise<User | null> {}
async findOneByCondition(condition: FindCondition): Promise<User | null> {}

// âœ… ëª©ë¡ ì¡°íšŒ
async findAll(): Promise<User[]> {}
async findMany(ids: string[]): Promise<User[]> {}
async findByStatus(status: UserStatus): Promise<User[]> {}
async findByRole(role: UserRole): Promise<User[]> {}

// âœ… í˜ì´ì§€ë„¤ì´ì…˜ ì¡°íšŒ
async findWithPagination(pagination: PaginationOptions): Promise<PaginatedResult<User>> {}
async findByStatusWithPagination(status: UserStatus, pagination: PaginationOptions): Promise<PaginatedResult<User>> {}

// âœ… ê´€ê³„ ë°ì´í„° í¬í•¨ ì¡°íšŒ
async findByIdWithRelations(id: string): Promise<User> {}
async findByIdWithProfile(id: string): Promise<User> {}
async findAllWithOrders(): Promise<User[]> {}
```

#### 2. ìƒì„± (Create)

```typescript
// âœ… ë‹¨ì¼ ìƒì„±
async create(data: CreateUserData): Promise<User> {}
async insert(user: User): Promise<User> {}
async save(user: User): Promise<User> {}

// âœ… ëŒ€ëŸ‰ ìƒì„±
async createMany(data: CreateUserData[]): Promise<User[]> {}
async insertBulk(users: User[]): Promise<InsertResult> {}
async bulkInsert(users: User[]): Promise<number> {}
```

#### 3. ìˆ˜ì • (Update)

```typescript
// âœ… ë‹¨ì¼ ìˆ˜ì •
async update(id: string, data: UpdateUserData): Promise<User> {}
async updateById(id: string, data: Partial<User>): Promise<User> {}

// âœ… ì¡°ê±´ë¶€ ìˆ˜ì •
async updateByEmail(email: string, data: Partial<User>): Promise<User> {}
async updateByCondition(condition: FindCondition, data: Partial<User>): Promise<UpdateResult> {}

// âœ… ëŒ€ëŸ‰ ìˆ˜ì •
async updateMany(ids: string[], data: Partial<User>): Promise<UpdateResult> {}
async updateByStatus(status: UserStatus, data: Partial<User>): Promise<UpdateResult> {}

// âœ… íŠ¹ì • í•„ë“œ ìˆ˜ì •
async updateEmail(id: string, email: string): Promise<void> {}
async updateStatus(id: string, status: UserStatus): Promise<void> {}
async incrementLoginCount(id: string): Promise<void> {}
```

#### 4. ì‚­ì œ (Delete)

```typescript
// âœ… ë‹¨ì¼ ì‚­ì œ
async delete(id: string): Promise<void> {}
async deleteById(id: string): Promise<DeleteResult> {}
async remove(id: string): Promise<void> {}

// âœ… ì¡°ê±´ë¶€ ì‚­ì œ
async deleteByEmail(email: string): Promise<DeleteResult> {}
async deleteByStatus(status: UserStatus): Promise<DeleteResult> {}

// âœ… ëŒ€ëŸ‰ ì‚­ì œ
async deleteMany(ids: string[]): Promise<DeleteResult> {}
async deleteAll(): Promise<DeleteResult> {}

// âœ… Soft Delete
async softDelete(id: string): Promise<void> {}
async softDeleteMany(ids: string[]): Promise<UpdateResult> {}
```

#### 5. ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œ

```typescript
// âœ… ì¡´ì¬ í™•ì¸
async exists(id: string): Promise<boolean> {}
async existsByEmail(email: string): Promise<boolean> {}
async existsByCondition(condition: FindCondition): Promise<boolean> {}

// âœ… ì¹´ìš´íŠ¸
async count(): Promise<number> {}
async countByStatus(status: UserStatus): Promise<number> {}
async countByRole(role: UserRole): Promise<number> {}

// âœ… ì§‘ê³„
async sum(field: string): Promise<number> {}
async average(field: string): Promise<number> {}
async aggregate(pipeline: AggregationPipeline): Promise<AggregationResult> {}
```

---

## ì‹¤ì „ ì˜ˆì‹œ

### ë©”ì‹œì§€ ê¸°ëŠ¥ êµ¬í˜„

#### Controller

```typescript
@Controller('messages')
export class MessagesController {
  // ì¡°íšŒ
  @Get(':id')
  async getMessage(@Param('id') id: string) {
    return this.service.getMessageById(id);
  }

  @Get('chatroom/:roomId')
  async getMessages(@Param('roomId') roomId: string, @Query() query: PaginationDto) {
    return this.service.getMessagesByRoomId(roomId, query);
  }

  // ìƒì„±
  @Post()
  async sendMessage(@CurrentUser('id') userId: string, @Body() dto: SendMessageDto) {
    return this.service.sendMessage(userId, dto);
  }

  // ìˆ˜ì •
  @Patch(':id/read')
  async markAsRead(@Param('id') id: string, @CurrentUser('id') userId: string) {
    return this.service.markMessageAsRead(id, userId);
  }

  // ì‚­ì œ
  @Delete(':id')
  async deleteMessage(@Param('id') id: string, @CurrentUser('id') userId: string) {
    return this.service.deleteMessage(id, userId);
  }
}
```

#### Service

```typescript
@Injectable()
export class MessagesService {
  // ì¡°íšŒ
  async getMessageById(id: string): Promise<Message> {
    const message = await this.repository.findById(id);
    if (!message) {
      throw new NotFoundException('ë©”ì‹œì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    }
    return message;
  }

  async getMessagesByRoomId(roomId: string, pagination: PaginationDto): Promise<PaginatedResult<Message>> {
    return this.repository.findByRoomIdWithPagination(roomId, pagination);
  }

  // ìƒì„± (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í¬í•¨)
  async sendMessage(senderId: string, dto: SendMessageDto): Promise<Message> {
    // 1. ì±„íŒ…ë°© ì¡´ì¬ í™•ì¸
    const chatRoom = await this.chatRoomRepository.findById(dto.roomId);
    if (!chatRoom) {
      throw new NotFoundException('ì±„íŒ…ë°©ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    }

    // 2. ê¶Œí•œ í™•ì¸
    await this.validateChatRoomAccess(chatRoom, senderId);

    // 3. ë©”ì‹œì§€ ìƒì„±
    const message = await this.repository.create({
      senderId,
      receiverId: dto.receiverId,
      content: dto.content,
      roomId: dto.roomId,
    });

    // 4. ì•Œë¦¼ ì „ì†¡
    await this.notificationService.sendMessageNotification(dto.receiverId, message);

    return message;
  }

  // ìˆ˜ì • (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
  async markMessageAsRead(messageId: string, userId: string): Promise<void> {
    const message = await this.repository.findById(messageId);
    
    if (!message) {
      throw new NotFoundException('ë©”ì‹œì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    }

    if (message.receiverId !== userId) {
      throw new ForbiddenException('ì½ìŒ ì²˜ë¦¬ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤');
    }

    await this.repository.updateReadStatus(messageId, true);
  }

  // ì‚­ì œ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
  async deleteMessage(messageId: string, userId: string): Promise<void> {
    const message = await this.repository.findById(messageId);
    
    if (!message) {
      throw new NotFoundException('ë©”ì‹œì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    }

    if (message.senderId !== userId) {
      throw new ForbiddenException('ì‚­ì œ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤');
    }

    await this.repository.delete(messageId);
  }

  // í—¬í¼ ë©”ì„œë“œ
  private async validateChatRoomAccess(chatRoom: ChatRoom, userId: string): Promise<void> {
    const isMember = await this.chatRoomMemberRepository.existsByRoomAndUser(chatRoom.id, userId);
    if (!isMember) {
      throw new ForbiddenException('ì±„íŒ…ë°© ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤');
    }
  }
}
```

#### Repository

```typescript
@Injectable()
export class MessageRepository {
  // ì¡°íšŒ
  async findById(id: string): Promise<Message | null> {
    return this.messageModel.findById(id).exec();
  }

  async findByRoomId(roomId: string): Promise<Message[]> {
    return this.messageModel.find({ roomId }).sort({ createdAt: -1 }).exec();
  }

  async findByRoomIdWithPagination(
    roomId: string,
    pagination: PaginationOptions,
  ): Promise<PaginatedResult<Message>> {
    const skip = (pagination.page - 1) * pagination.limit;

    const [items, total] = await Promise.all([
      this.messageModel
        .find({ roomId })
        .skip(skip)
        .limit(pagination.limit)
        .sort({ createdAt: -1 })
        .exec(),
      this.messageModel.countDocuments({ roomId }).exec(),
    ]);

    return {
      items,
      total,
      page: pagination.page,
      limit: pagination.limit,
      totalPages: Math.ceil(total / pagination.limit),
    };
  }

  // ìƒì„±
  async create(data: CreateMessageData): Promise<Message> {
    const message = new this.messageModel(data);
    return message.save();
  }

  async createMany(data: CreateMessageData[]): Promise<Message[]> {
    return this.messageModel.insertMany(data);
  }

  // ìˆ˜ì •
  async update(id: string, data: Partial<Message>): Promise<Message> {
    return this.messageModel.findByIdAndUpdate(id, data, { new: true }).exec();
  }

  async updateReadStatus(id: string, isRead: boolean): Promise<void> {
    await this.messageModel.updateOne({ _id: id }, { isRead, readAt: new Date() }).exec();
  }

  async updateMany(ids: string[], data: Partial<Message>): Promise<UpdateResult> {
    return this.messageModel.updateMany({ _id: { $in: ids } }, data).exec();
  }

  // ì‚­ì œ
  async delete(id: string): Promise<void> {
    await this.messageModel.findByIdAndDelete(id).exec();
  }

  async deleteByRoomId(roomId: string): Promise<DeleteResult> {
    return this.messageModel.deleteMany({ roomId }).exec();
  }

  async deleteMany(ids: string[]): Promise<DeleteResult> {
    return this.messageModel.deleteMany({ _id: { $in: ids } }).exec();
  }

  // ìœ í‹¸ë¦¬í‹°
  async exists(id: string): Promise<boolean> {
    return this.messageModel.exists({ _id: id }).then(result => !!result);
  }

  async countByRoomId(roomId: string): Promise<number> {
    return this.messageModel.countDocuments({ roomId }).exec();
  }

  async countUnreadByReceiver(receiverId: string): Promise<number> {
    return this.messageModel.countDocuments({ receiverId, isRead: false }).exec();
  }
}
```

---

## ìš”ì•½ í…Œì´ë¸”

### ì‘ì—…ë³„ ë ˆì´ì–´ ëª…ëª… ë¹„êµ

| ì‘ì—… | Controller | Service | Repository |
|------|-----------|---------|-----------|
| **ë‹¨ì¼ ì¡°íšŒ** | `getUser` | `getUserById` | `findById` |
| **ëª©ë¡ ì¡°íšŒ** | `getUsers` | `getUsers` | `findAll` |
| **ìƒì„±** | `createUser` | `createUser`, `registerUser` | `create`, `insert` |
| **ìˆ˜ì •** | `updateUser` | `updateUser`, `modifyUser` | `update`, `updateById` |
| **ë¶€ë¶„ ìˆ˜ì •** | `updateStatus` | `updateUserStatus`, `changeStatus` | `updateStatus` |
| **ì‚­ì œ** | `deleteUser` | `deleteUser`, `removeUser` | `delete`, `deleteById` |
| **íŠ¹ì • ë™ì‘** | `activateUser` | `activateUser` | `updateStatus` |

### ë™ì‚¬ ì‚¬ìš© ê¶Œì¥ ì‚¬í•­

| ë ˆì´ì–´ | ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë™ì‚¬ |
|--------|-------------------|
| **Controller** | get, create, update, delete, patch (HTTP ë©”ì„œë“œ ê¸°ë°˜) |
| **Service** | get, find, create, register, update, modify, change, delete, remove, process, handle, validate, verify (ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ë¯¸) |
| **Repository** | find, create, insert, save, update, delete, remove, exists, count (CRUD ì—°ì‚°) |

---

## ì¶”ê°€ ê¶Œì¥ ì‚¬í•­

### 1. ì¼ê´€ì„± ìœ ì§€
- í”„ë¡œì íŠ¸ ì „ì²´ì—ì„œ ë™ì¼í•œ ëª…ëª… ê·œì¹™ ì ìš©
- íŒ€ ì½”ë”© ì»¨ë²¤ì…˜ ë¬¸ì„œí™”
- ESLint ê·œì¹™ìœ¼ë¡œ ê°•ì œ

### 2. ì˜ë¯¸ ì „ë‹¬ ìš°ì„ 
- í•¨ìˆ˜ëª…ë§Œ ë´ë„ ë¬´ì—‡ì„ í•˜ëŠ”ì§€ ëª…í™•í•´ì•¼ í•¨
- ë¶ˆí•„ìš”í•˜ê²Œ ê¸´ ì´ë¦„ë³´ë‹¤ëŠ” ëª…í™•í•œ ì§§ì€ ì´ë¦„ ì„ í˜¸
- ë„ë©”ì¸ ìš©ì–´ ì ê·¹ í™œìš©

### 3. ë°˜í™˜ íƒ€ì… ê³ ë ¤
```typescript
// âœ… ë³µìˆ˜í˜• ë°˜í™˜
async getUsers(): Promise<User[]> {}
async findAll(): Promise<User[]> {}

// âœ… ë‹¨ìˆ˜í˜• ë°˜í™˜
async getUser(): Promise<User> {}
async findById(): Promise<User | null> {}

// âœ… Boolean ë°˜í™˜
async exists(): Promise<boolean> {}
async isActive(): Promise<boolean> {}
async hasPermission(): Promise<boolean> {}

// âœ… Number ë°˜í™˜
async count(): Promise<number> {}
async calculate(): Promise<number> {}
```

### 4. ë¹„ë™ê¸° ì²˜ë¦¬ ëª…ì‹œ
```typescript
// âœ… async/await íŒ¨í„´ (ê¶Œì¥)
async getUser(id: string): Promise<User> {
  return this.repository.findById(id);
}

// âŒ Promise ì²´ì´ë‹ (ê°€ë…ì„± ë–¨ì–´ì§)
getUser(id: string): Promise<User> {
  return this.repository.findById(id).then(...);
}
```

---

ì´ ê°€ì´ë“œëŠ” NestJS, Express, Spring Boot ë“± ëŒ€ë¶€ë¶„ì˜ ë°±ì—”ë“œ í”„ë ˆì„ì›Œí¬ì—ì„œ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì—…ê³„ í‘œì¤€ ëª…ëª… ê·œì¹™ì…ë‹ˆë‹¤.
